extends ../../layouts/default

block js
	script(type='text/javascript' src='/js/UnityObject2.js')

	script.
		var config = {
			width: 880,
			height: 510,
			params: {enableDebugging: "0"}

		};
		var u = new UnityObject2(config);

		jQuery(function () {
			var player = $("#unityPlayer");
			var $missingScreen = player.find(".missing");
			var $brokenScreen = player.find(".broken");
			$missingScreen.hide();
			$brokenScreen.hide();

			u.observeProgress(function (progress) {
				switch (progress.pluginStatus) {
					case "broken":
						$brokenScreen.find("a").click(function (e) {
							e.stopPropagation();
							e.preventDefault();
							u.installPlugin();
							return false;
						});
						$brokenScreen.show();
						break;
					case "missing":
						$missingScreen.find("a").click(function (e) {
							e.stopPropagation();
							e.preventDefault();
							u.installPlugin();
							return false;
						});
						$missingScreen.show();
						break;
					case "installed":
						$missingScreen.remove();
						break;
					case "first":
						break;
				}
			});
			u.initPlugin(player[0], "BN12.unity3d");
		});


block content
	.container: .jumbotron
		
		h2= (content && content.name) || "Mc Coy"
		p!= (content && content.contenu) || "Configurez dans l'admin un contenu générique avec la clé 'mccoy'."
		
		hr
		
		#unityPlayer
			.missing
				a(href='http://unity3d.com/webplayer/', title='Unity Web Player. Install now!')
					img(alt='Unity Web Player. Install now!', src='http://webplayer.unity3d.com/installation/getunity.png', width='193', height='63')
